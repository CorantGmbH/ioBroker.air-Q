<html>

<head>

<!-- Load ioBroker scripts and styles-->
<link rel="stylesheet" type="text/css" href="../../css/adapter.css" />
<link rel="stylesheet" type="text/css" href="../../lib/css/materialize.css">

<script type="text/javascript" src="../../lib/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="../../socket.io/socket.io.js"></script>

<script type="text/javascript" src="../../js/translate.js"></script>
<script type="text/javascript" src="../../lib/js/materialize.js"></script>
<script type="text/javascript" src="../../js/adapter-settings.js"></script>

<!-- Load our own files -->
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="words.js"></script>
	
	<script type="text/javascript">
		// This will be called by the admin adapter when the settings page loads
			function load(settings, onChange) {
				if (!settings.retrievalType) settings.retrievalType = "average";
				if (!settings.retrievalRate) settings.retrievalRate = 10;
				if (!settings.shortId) settings.shortId = "";
				if (!settings.password) settings.password = "";

				if (!settings) return;
				$(".value").each(function () {
					var $key = $(this);
					var id = $key.attr("id");
					if ($key.attr("type") === "checkbox") {
						$key.prop("checked", settings[id]).on("change", () => onChange());
					} else {
						$key.val(settings[id])
							.on("change", () => onChange())
							.on("keyup", () => onChange());
					}
				});
				onChange(false);
				if (M) M.updateTextFields();
			}

			function save(callback) {
				var obj = {};
				$(".value").each(function () {
					var $this = $(this);
					if ($this.attr("type") === "checkbox") {
						obj[$this.attr("id")] = $this.prop("checked");
					} else if ($this.attr("type") === "number") {
						obj[$this.attr("id")] = parseFloat($this.val());
					} else {
						obj[$this.attr("id")] = $this.val();
					}
				});
				callback(obj);
			}
		</script>

</head>

<body>
	<div class="m adapter-container" id="root">
		<div class="row">
			<div class="row" style="padding: 4px">
				<h6 class="title" style="background-color: #174475; font-size: 1.2rem; border-radius: 4px">
					<div for="access_data" class="translate">access_data_txt</div>
				</h6>
				<div class="input-field col s6 m6">
					<input type="text" class="value" id="shortId" maxlength="5" />
					<label for="shortId" class="translate">shortId_txt</label>
				</div>

				<div class="col s6 input-field">
					<input type="password" class="value" id="password" />
					<label for="password" class="translate">password_txt</label>
				</div>
			</div>
			<div class="row" style="padding: 4px">
				<h6 class="title" style="background-color: #174475; font-size: 1.2rem; border-radius: 4px">
					<div for="access_data" class="translate">retrieval_txt</div>
				</h6>
			</div>
			<div class="row" style="padding: 4px">
				<div class="input-field col s12 m6 l3">
					<label for="retrievalRate" class="translate">retrieval_rate_txt</label>
					<input
						type="number"
						class="value"
						id="retrievalRate"
						min="2"
						max="500"
						step="1"
						placeholder="10"
					/>
				</div>
			</div>
			<div class="row" style="padding: 4px">
				<div class="input-field col s12 m6 l3">
					<select id="retrievalType" class="value">
						<option value="data" class="translate">retrieval_type_data_txt</option>
						<option value="average" class="translate">retrieval_type_average_txt</option>
					</select>
					<label for="retrievalType" class="translate">retrieval_type_txt</label>
				</div>
			</div>
		</div>
	</div>

</body>

</html>